# 컴퓨터 네트워킹 하향식 접근

## 1. 인터넷과 프로토콜

-   인터넷이란?
    -   정의: 네트워크의 연결
    -   구성요소
        -   하드웨어
            -   host(end system): 클라이언트와 서버로 구분할 수 있다.
            -   links  
                -   구리선, 동축 케이블, 광케이블, 라디오 스펙트럼, 위성 전파
                -   전송률(링크 대역폭) (transmission rate, link capacity, bandwith) - 단위 bit per second (bps)
                -   end system 과 router 간 링크를 통해 데이터를 교환한다.
            -   router, switch
                -   라우터와 스위치는 도착하는 패킷을 받아서 출력 통신 링크로 패킷을 전달한다.
        -   소프트웨어
            -   운영체제
            -   응용 프로그램
            -   프로토콜
                -   프로토콜은 둘 이상의 통신 개체 간에 교환되는 메시지 포맷과 순서뿐만 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동을 정의한다.
                -   TCP/IP 는 인터넷에서 가장 중요한 프로토콜이다.
-   네트워크 엣지
    -   접속 네트워크(access network): end system 간에 연결되는 경로상의 첫번째 라우터에 연결하는 네트워크
        -   DSL, 케이블, FTTH, 5G-FW
        -   이더넷(Ethernet) 스위치
        -   무선 LAN(Wi-Fi) - AP(access point)
        -   3G / 4G LTE / 5G
    -   비트의 전달 방식
        -   출발지 host(end system)이 비트를 전송한다.
        -   첫번째 라우터가 비트를 수신한 후에 경로 상의 다음 라우터로 전송하고 두번째 라우터가 비트를 수신한다.
        -   비트는 물리 매체(꼬임쌍선, 동축케이블, 광케이블, 지상파, 위성파) 상에서 전자파나 광 펄스를 전파하여 전송한다.
-   네트워크 코어
    -   네트워크 코어는 인터넷의 end system 을 연결하는 패킷 스위치(라우터)와 링크의 그물망 형태를 가지고 있다.
    -   패킷 교환
        -   host(end system) 간의 통신시 긴 메시지를 패킷(paket)이라는 작은 데이터 단위로 분할하여 전송된다.
        -   각 패킷은 패킷 스위치(라우터)와 링크계층 스위치를 거치게된다.
        -   라우터는 저장 후 전달 전송 방식을 이용한다. 패킷을 전달시 전체 패킷을 수신할 때까지 버퍼에 패킷의 비트를 저장한 후 전체 패킷의 비트를 수신하면 완성된 패킷을 다음 라우터로 전송한다.
    -   큐잉 지연과 패킷 손실
        -   라우터는 링크에 대해 출력 버퍼를 가지고 있으며 그 링크로 송신하려는 패킷을 저장하고 있다.
        -   도착하는 패킷이 전송되어야 하는 링크가 다른 패킷을 전송하고 있다면 도착하는 패킷이 출력 버퍼에서 대기해야하는 큐잉 지연(Queuing delay) 현상이 발생한다.
        -   버퍼 공간의 크기가 유한하므로 버퍼 공간이 꽉 차있다면 패킷 손실이 발생할 수도 있다.
    -   포워딩 테이블과 라우팅 프로토콜
        -   라우터는 패킷을 어느 링크로 전달할 지 어떻게 결정하는가?
            -   모든 host(end system)은 고유의 IP 주소를 가진다.
            -   패킷을 전송할 때 패킷의 헤더에 목적지의 IP 주소를 포함하여 전송한다.
            -   각 라우터는 목적지 주소를 라우터의 출력 링크로 매핑하는 포워딩 테이블을 갖고 있다.
            -   라우터는 도착한 패킷을 조사하여 IP 주소를 확인 후 IP 주소를 이용하여 포워딩 테이블을 검색한다.
            -   확인된 출력 링크로 도착한 패킷을 전송한다.
        -   포워딩 테이블은 어떻게 설정되는가?
            -   인터넷은 자동으로 포워딩 테이블을 설정하는 데 이용되는 라우팅 프로토콜을 가지고 있다.
    -   데이터 전달 방식
        -   회선 교환 방식(circuit switching)
        -   패킷 교환 방식(packet switching)

- 프로토콜 계층
    -   프로토콜은 계층 구조를 이루고 있다.
    -   각 계층은 인접 계층과 연계하여 특정한 서비스를 구현한다.
    -   각 계층에서 패킷은 헤더 필드와 페이로드 필드라는 두 가지 형태의 필드를 가지고 있으며 페이로드는 일반적으로 상위 계층의 패킷을 의미한다.
    -   상위 계층에서 하위 계층으로 메시지 이동시 캡슐화 과정을 거친다.
 
 - 애플리케이션 계층

	-   네트워크 애플리케이션, 애플리케이션 계층 프로토콜(HTTP, SMTP, FTP 등)이 존재하는 계층
	-   애플리케이션 계층 프로토콜을 통해 다른 end system의 애플리케이션과 정보 패킷(message)을 교환할 수 있다.

- 트랜스포트 계층

	-   클라이언트와 서버 간에 애플리케이션 계층 메시지를 전송하는 서비스를 제공한다.
	-   트랜스포트 계층 패킷을 segment라고 부른다.
	-   TCP
	    -   연결 지향형 서비스 제공
	    -   연결 지향형 서비스는 애플리케이션 계층 메시지 전달을 보장하고 흐름 제어 기능을 포함한다.
	    -   긴 메시지를 짧은 메시지로 나누고 혼잡 제어 기능을 제공하여 네트워크가 혼잡할 때 출발지의 전송률을 조정한다.
	-   UDP
	    -   비연결형 서비스 제공
	    -   비연결형 서비스는 전달보장, 흐름제어, 혼잡 제어 기능 없이 단순히 애플리케이션 계층의 메시지를 전송만 하는 간단한 서비스다.

- 네트워크 계층(IP 계층)

	-   네트워크 계층 패킷을 datagram이라고 부른다.
	-   네트워크 계층은 호스트 간 datagram을 라우팅 하는 책임 갖고 있다.
	    -   출발지 end system(호스트)에서 트랜스포트 계층 프로토콜은 트랜스 포트 계층 세그먼트와 목적지 주소를 네트워크 계층으로 전달한다.
	    -   네트워크 계층은 이렇게 전달받은 목적지 주소를 이용하여 목적지 end system 의 트랜스포트 계층으로 세그먼트를 운반한다.
	-   네트워크 계층 프로토콜은 IP 프로토콜과 라우팅 프로토콜을 포함한다.
	-   IP
	    -   네트워크 계층을 가진 모든 인터넷 요소는 IP 프로토콜을 수행해야한다.
	-   라우팅 프로토콜
	    -   출발지와 목적지 사이에서 데이터그램이 이동하는 경로를 결정한다.

- 링크 계층

	-   경로 상의 한 노드에서 다른 노드로 패킷을 이동하기 위해 네트워크 계층은 링크 계층 서비스에 의존하고 있다.
	-   각 노드에서 네트워크 계층은 데이터그램을 아래 링크 계층으로 보내고 링크 계층은 전달 받은 데이터그램을 경로상의 다음 노드에 전달한다. 다음 노드에서 링크 계층은 데이터그램을 상위 네트워크 계층으로 보낸다.
	-   링크 계층 패킷은 프레임(frame)이라고 부른다.

- 물리 계층
	-   링크 계층의 패킷(frame) 내부의 각 비트를 이동하는 책임을 수행한다.


## 2. 애플리케이션 계층

#### 네트워크 애플리케이션의 원리
	서로 다른 위치의 end system 에서 동작하고 네트워크를 통해 서로 통신하는 프로그램을 네트워크 애플리케이션이라고 한다.
	end system에만 애플리케이션 소프트웨어가 존재한다.
	네트워크 코어 장비에서 실행되는 소프트웨어까지 작성할 필요가 없고 작성할 수도 없다. 
	각 계층은 각기 맡은 책임만을 수행한다. 계층별로 나누어 관리하고 발전하고 개발할 수 있다.
- 네트워크 애플리케이션의 구조
	- 클라이언트 - 서버
	- P2P(peer to peer)
- 프로세스간 통신
	- 개요
		- 실제로 통신하는 것은 프로그램이 아니라 프로세스다.
		- 프로세스는 컴퓨터 네트워크를 통한 메시지 교환 (요청-응답)을 통해 서로 통신한다.
		- 프로세스 간의 통신을 위한 규칙은 end system의 운영체제에 의존한다.
	- 클라이언트와 서버 프로세스
		- 클라이언트 프로세스
			- 프로세스 간의 통신 세션에서 다른 프로세스와 세션을 시작하려고 접속을 초기화(통신초기화)하는 프로세스를 의미한다.
		- 서버 프로세스
			- 세션을 시작하기 위해 접속을 기다리는 프로세스를 의미한다.
	- 프로세스와 컴퓨터 네트워크 사이의 인터페이스
		- 프로세스는 소켓(socket)을 통해 네트워크로 메시지를 보내고 받는다.
		- 소켓은 애플리케이션 계층과 트랜스포트 계층간의 인터페이스다.
		- 소켓은 애플리케이션과 네트워크 사이의 API 라고도 한다.
		- 개발자는 소켓의 애플리케이션 계층에 대한 모든 통제권을 갖고 활용할 수 있지만 소켓의 트랜스포트 계층은 거의 통제할 수 없다. 트랜스포트 프로토콜의 선택과 최대 버퍼와 최대 세그먼트 크기 같은 매개변수 설정 밖에 할 수 없다.
	- 통신 대상 프로세스는 IP 주소와 포트번호로 식별할 수 있다.
	- 트랜스포트 계층 포로토콜은 수신 프로세스의 소켓으로 네트워크를 통해 메시지를 이동시킬 책임이 있다.
	- 트랜스포트 계층 프로토콜이 제공하는 서비스
		- 신뢰적 데이터 전송(reliable data transfer)
			- 트랜스포트 계층 프로토콜은 신뢰적 데이터 전송 서비스를 제공할 수 있다. 
			- 패킷이 손실되면 host 혹은 router에 의해 패킷이 버려질 수 있다.
			- 패킷이 손실되면 큰일나는 애플리케이션이 존재한다. 이 경우 데이터가 오류 없이 수신 프로세스에 도착할 것이라는 확신을 제공하는 기능이 필요하다. 은행 같은 경우 이러한 기능은 무조건 필요하다.
			- 신뢰적 데이터 전송 서비스는 프로토콜이 데이터 전송을 안전하게 보장하는 기능이다.
			- 반면 이러한 서비스가 필요하지 않은 애플리케이션은 약간의 데이터 손실을 감수할 수 있다.
				- 오디오나 비디오의 품질 저하
		- 처리율
			- 트랜스포트 계층 프로토콜은 처리율 보장을 제공할 수 있다. 
			- 처리율은 네트워크 경로를 따라 두 프로세스간의 통신 세션에서 송신 프로세스가 수신 프로세스로 비트를 전달할 수 있는 비율을 의미한다. 
			- 애플리케이션이 최소로 필요로 하는 처리율을 트랜스포트 프로토콜이 보장할 수 있어야하는 경우가 있다. 처리율 요구사항을 갖는 애플리케이션을 대역폭 민감 애플리케이션이라고 한다. 
				- 예) 인터넷전화
			- 반면 이러한 최소한의 처리율을 보장할 필요가 없는 애플리케이션을 탄력적 애플리케이션(elastic application) 이라고 한다. 
				- 예) 메일, 파일 전송
		- 시간
			- 트랜스포트 계층 프로토콜은 시간 보장을 제공할 수 있다. 
			- 송신자가 소켓으로 내보내는 모든 비트가 수신자의 소켓에 특정 시간내에 도착해야만 하는 애플리케이션
				- 예) 인터넷 전화, 가상환경, 원격 화상 회의, 등 실시간 상호작용 애플리케이션
		- 보안
			- 트랜스포트 계층 프로토콜은 애플리케이션에 하나 이상의 보안 서비스를 제공할 수 있다.
				- 트랜스포트 프로토콜은 송신 호스트의 송신 프로세스가 전송하는 모든 데이터를 암호화할 수 있고 수신 호스트에서 그 데이터를 수신프로세스로 전달하기 전에 데이터의 암호를 해독할 수 있다.
			- 데이터 무결성 서비스를 제공한다. 
			- 종단 인증 서비스를 제공한다. 
- 인터넷 전송 프로토콜이 제공하는 서비스 비교
    -   TCP 와 UDP는 애플리케이션에 서로 다른 서비스를 제공한다.
    -   애플리케이션의 요구사항을 살펴보고 결정해야한다.
        -   데이터 손실
        -   대역폭
        -   시간 민감성
    -   TCP
        -   연결지향형 서비스
            -   애플리케이션 계층 메시지를 전송하기전 클라이언트와 서버가 서로 전송 제어 정보를 교환한다(핸드쉐이킹)
            -   이렇게 TCP 연결이 두 프로세스의 소켓사이에 존재하게 되고 그때부터 서로 통신을 시작한다.
            -   수신 프로세스가 받을 수 있는 용량의 데이터만 보낼 수 있다.
        -   신뢰적인 데이터 전송 서비스
            -   TCP는 패킷 손실 없이 수신 소켓으로 데이터를 전송할 수 있게 보장한다.
            -   모든 데이터를 오류 없이 올바른 순서로 전달한다.
            -   에러가 발생할 경우 재전송을 요청한 후 에러가 없는 데이터가 모두 도착했을 때 애플리케이션 레이어에 전달한다.
            -   HTTP, SMTP, FTP는 데이터 손실이 발생하면 안되기 때문에 TCP를 사용한다.
        -   혼잡 제어 서비스
            -   네트워크가 혼잡 상태에 이르면 프로세스 속도를 낮추어서 각 TCP 연결이 네트워크 대역폭을 공평하게 공유할 수 있게끔 한다.
    -   UDP
        -   비신뢰적인 서비스
            -   비연결형이므로 두 프로세스가 통신을 하기전에 핸드셰이킹 하지 않는다.
            -   그래서 전반적으로 TCP보다 속도가 빠르다.
            -   순서가 뒤바뀔수도 있고 데이터 손실이 발생할 수도 있다.
        -   송신 측은 데이터를 원하는 속도로 보낼 수 있지만 실제로 제한된 대역폭, 혼잡으로 인해 전송 속도가 감소할 수 있다.
-   WEB과 HTTP
    -   URL
        -   웹 페이지의 객체는 URL로 지정할 수있는 하나의 파일이다.
    -   HTTP(HyperText Transfer Protocol)
        -   HTTP는 메시지의 구조 및 클라이언트와 서버가 메시지를 어떻게 교환하는지에 대해 정의한다.
        -   데이터 손실이 일어나면 안되기 때문에 TCP를 전송 프로토콜로 사용한다.
        -   비상태 프로토콜(stateless)
            -   서버가 클라이언트에게 요청파일을 보낼때 서버는 클라이언트에 관한 어떠한 상태정보도 저장하지 않는다.
        -   기본적으로 지속 연결 모드로 사용하지만 비지속 연결 모드를 사용할 수 도 있음.
            -   지속 연결: 모든 요청과 응답이 같은 TCP 연결을 통해 이루어 진다.(persistent)
            -   비지속 연결: 각 요청와 응답이 분리된 TCP 연결을 통해 이루어진다.(non-persistent)
        -   HTTP 메시지 구조
            -   ASCII 텍스트로 쓰여있음.
            -   요청 메시지
                -   request line
                    -   method 필드: GET, POST, PUT, DELETE, HEAD...
                    -   url 필드
                    -   HTTP 버전 필드
                -   header line
                    -   헤더 필드 이름: 값 + CR + LF
                -   entity body
            -   응답 메시지
                -   status line
                    -   HTTP 버전 필드
                    -   상태 코드 필드
                    -   해당 상태 코드 메시지 필드
                -   header line
                    -   헤더 필드 이름: 값 + CR + LF
                -   entity body
        -   HTTP 개발 역사
            -   HTTP/1
                -   1996년
                -   비지속 연결
            -   HTTP/1.1
                -   1999년
                -   동기적 지속 연결
            -   HTTP/2.0
                -   2015년
                -   비동기적 지속 연결
    -   쿠키
        -   무상태 프로토콜인 HTTP를 사용하지만 사용자의 접속을 제어하거나 사용자에 따라 다른 콘텐츠를 제공해야할 필요성 때문에 개발되었다.
        -   서버에는 사용자의 state 를 쿠키로 저장한다.
    -   웹 캐시
        -   수 많은 사람들이 같은 사이트에 접속하는 경우 오버헤드가 커진다. 즉 부하가 생기고 속도가 느려진다.
        -   똑같은 중복 요청의 경우 origin 서버까지 요청이 가지 않아도 동일한 결과를 응답할 수 있다. origin 서버로부터 이전에 미리 받아서 저장하고 있던 데이터로 중간의 프록시 서버가 응답한다.
        -   CDN 회사는 웹 캐시를 설치하여 많은 트래픽을 분산하고 있다.
        -   그렇다면 복사본이 최신 버전이라는 것을 어떻게 보장할 것인가?
            -   HTTP 는 클라이언트가 브라우저로 전달되는 모든 객체가 최신의 것임을 확인하면서 캐싱을 하게 해주는 방식을 갖고 있다. 이 방식을 조건부 GET 이라고 한다.
            -   GET 방식과 if-modified-since 헤더를 사용한다.
-   SSL / TLS
    -   TCP 데이터 전송시 암호화를 제공하는 프로토콜
    -   Secured Socket Layer / Transpost Layer Security
    -   애플리케이션 계층 프로토콜
    -   서버와 통신 시작 시 TCP의 핸드셰이킹처럼 SSL 연결을 먼저 확립하고 암호화된 방식으로 통신할 수 있게 한다.
    -   http => +SSL/TLS => https
-   인터넷 전자메일
    -   구성요소
        -   user agent
            -   사용자가 메시지를 읽고 응답하고 전달하고 저장하고 구성하게 해준다.
            -   예) gmail, apple mail, naver mail...
        -   mail server
            -   메일 서버 내에는 mail box가 존재한다.
            -   mail box는 메일을 유지하고 관리한다.
        -   SMTP(Simple Mail Transfer Protocol)
            -   인터넷 전자 메일을 위한 애플리케이션 계층 프로토콜
            -   TCP 이용
-   DNS
    -   IP 버전 4 주소의 경우 32 bit 길이의 주소를 가지는데 사람이 읽고 기억하기가 어렵다.
    -   사용자가 www.google.com 이라고 주소를 입력하면 해당하는 IP 주소를 알려주는게 DNS 시스템이다.
    -   데이터센터에서 여러 대의 서버를 두는 경우 호스트 이름은 동일하더라도 IP 주소를 다르게 관리할 수 있어 트래픽을 분산할 수 있는 장점도 있다.
    -   DNS 시스템은 지역적으로도 분산되어 있고 계층적으로 역할이 나누어져있다.
    -   Root - Top Level - authoritative



## 3. 트랜스포트 계층

-   트랜스포트 계층이 제공하는 서비스
    -   트랜스포트 계층 프로토콜은 각기 다른 호스트에서 동작하는 애플리케이션의 프로세스 간의 논리적인 통신을 제공한다.
        -   현재 실행되고 있는 다수의 프로세스를 구별하여 통신할 수 있다.  
            
        -   end system 사이의 IP 전달 서비스를 end system 에서 동작하는 두 프로세스 간의 전달 서비스로 확장한다.
            -   트랜스포트 계층은 세그먼트를 검사하여 올바른 목적지의 프로세스의 소켓에게 전달한다. 호스트의 각 소켓은 포트번호도 할당받는다.  
                
            -   호스트 사이의 전달을 프로세스 사이의 전달로 확장하는 것을 트랜스포트 계층 다중화(Transport-layer multiplexing) 또는 역다중화(demultiplexing)라고 부른다.  
                -   트랜스포트 계층 세그먼트의 데이터를 올바른 소켓으로 전달하는 작업을 역다중화라고 한다.
                -   출발지 호스트에서 소켓으로부터 데이터를 모으고 이에 대한 세그먼트를 생성하기 위해 각 데이터에 헤더 정보로 캡슐화하고 그 세그먼트들을 네트워크 계층으로 전달하는 작업을 다중화라고 한다.
            -   소켓은 유일한 식별자를 가지고 있으며, 각 세그먼트는 세그먼트가 전달될 적절한 소켓을 가리키는 특별한 필드를 갖고 있다. 그 필드는 출발지 포트 번호 필드와 목적지 포트 번호 필드이다. 각각의 포트 번호는 0~ 65535까지의 16비트 정수다.  
                
        -   TCP와 UDP는 헤더에 오류 검출 필드를 추가함으로써 무결성 검사를 수행할 수 있다.
    -   통신 방법
        -   송신: 송신 측의 트랜스포트 계층은 송신 애플리케이션 프로세스로부터 수신한 메시지를 세그먼트(segment)로 변환하고 트랜스포트 계층 헤더를 추가한다. 그 후 네트워크 계층으로 세그먼트를 전달한다. 네트워크 계층은 호스트 사이의 논리적 통신을 제공한다고 할 수 있다.
        -   수신: 수신 측의 트랜스포트 계층은 네트워크 계층으로부터 전달받은 세그먼트를 데이터로 이용할 수 있게 만든다.
    -   네트워크 계층의 IP 프로토콜이 패킷을 분실하거나 손상시켜도 애플리케이션에게 신뢰적인 데이터 전송 서비스를 제공할 수 있다. 또 네트워크 계층이 트랜스포트 계층 세그먼트의 기밀성을 보장할 수 없을 때도 메시지를 암호화 할 수 있다.  
        
-   UDP(User Datagram Protocol)
    -   비신뢰적이고 비연결형인 서비스 제공
        -   각각의 세그먼트는 독립적으로 취급이 된다.
        -   TCP에 비해 상대적으로 속도가 빠르다.
        -   다중화와 역다중화 기능과 간단한 오류 검사 기능만을 제공한다.
        -   UDP를 사용하려면서 신뢰적인 데이터를 전송하려면 애플리케이션 자체에서 확인응답 기능과 재전송 기능을 제공해야한다. 이런 방식의 장점은 TCP의 혼잡 제어 메커니즘에 의해 전송률 억제를 강요당하지 않고도 신뢰적으로 통신할 수 있다.
    -   UDP 다중화와 역다중화
        -   UDP 소켓은 목적지 IP 주소와 목적지 포트 번호로 구성된 두 요소의 집합으로 구별된다.  
            
    -   UDP 세그먼트 구조
        -   UDP 헤더는 2바이트씩으로 구성된 4개의 필드를 가진다. (4byte, 32bit)  
            -   출발지 포트 번호, 목적지 포트번호, 길이, 체크섬
            -   체크섬은 세그먼트에 오류가 발생했는지를 검사하기위해 수신 호스트가 사용한다.  
                
-   TCP
    -   신뢰적이고 연결지향형 서비스 제공
    -   신뢰적인 데이터 전송: 데이터가 순서대로 정확하게 전달되도록 보장
        -   흐름제어
        -   순서번호
        -   확인응답
        -   타이머
    -   혼잡 제어
    -   TCP 다중화와 역다중화
        -   TCP 소켓은 출발지 IP주소, 출발지 포트번호, 목적지 IP주소, 목적지 포트번호로 구성된 4가지 요소의 집합으로 구별된다.
        -   서버는 각기 다른 클라이언트가 보낸 세그먼트를 출발지 IP주소와 출발지 포트 번호로 구별한다.


## 4. 네트워크 계층


  - 네트워크 계층의 책임
    -   네트워크 계층은 호스트 사이의 통신 서비스를 제공한다.
    -   호스트는 IP 주소로 구별할 수 있다.
    -   IP 프로토콜은 트랜스포트 계층의 segment를 전달받아 IP 헤더를 붙여서 datagram(IP 계층의 패킷을 지칭)을 만들고 데이터 링크 계층으로 전달한다.
    -   라우팅
        -   출발지부터 목적지까지의 길을 설정해주는 것
        -   라우팅 알고리즘은 라우터의 포워딩 테이블을 생성하는 정보를 제공한다.
    -   포워딩
        -   결정되어있는 라우터를 따라서 패킷을 옮겨주는 것
        -   경로 이동시 라우터의 포워딩 테이블이 안내한다.
        - 목적지 기반 포워딩
        - 일반화된 포워딩

-   라우터
    -   구조
        -   입력포트
            -   input queue(버퍼)
            -   HOL blocking 현상
        -   출력포트
            -   대기 큐
        -   스위칭
	        - 입력 포트와 출력 포트를 연결한다.
        -   라우팅 프로세서
	        - 라우팅 프로세서는 control plane 영역 기능을 수행. 
	        - 기존의 라우터에서는 라우팅 프로토콜을 실행하고 라우팅 테이블과 연결된 링크 상태 정보를 유지 관리하며 라우터의 포워딩 테이블을 계산한다.
	        - SDN 라우터에서 라우팅 프로세서는 원격 컨트롤러와 통신하여 원격 컨트롤러에서 계산된 포워딩 테이블 엔트리를 수신하고 라우터의 입력포트에 이러한 엔트리를 설치한다. 
	        - 네트워크 관리 기능 수행

-   인터넷 프로토콜 (IP)
    -   IPv4, IPv6
    -   IP 헤더
        -   TTL(Time To Live)
	        - 데이터그램이 목적지에 도착하지 못했을 경우 네트워크 내에서 떠돌아다니는 것을 방지하기 위하여 설정이다. 목적지 까지 거쳐갈 수 있는 최대 라우터 개수를 의미한다.
        -   checksum
        -   출발지와 목적지 IP 주소
    -   주소 체계
	    - IPv4
		    - 32bit 길이의 식별자를 할당
		    - 사람이 보기 쉽게 8bit 단위로 나누고 십진수로 바꾸고 점을 찍어서 표현 예) 221.1.1.1
		    - 주소는 네트워크 ID 와 호스트 ID로 나뉜다.
			    - class A: 앞 8bit 가 네트워크 ID(0~127)로 사용, 뒤 24 bit 가 호스트 ID로 사용된다. 
			    - class B: 앞 16bit 가 네트워크 ID, 뒤 16 bit 가 호스트 ID
			    - class C: 앞 24bit 가 네트워크 ID, 뒤 8 bit가 호스트 ID
		    - 서브네트워킹
			    - 내트워크 내부의 임의의 논리적인 네트워크를 만들어 네트워크를 효율적으로 관리할 수 있다. 
		    - CIDR(Classless Inter-Domain Routing)
			    - 기존의 클래스 주소체계와 달리 보다 효율적이고 유연하게 네트워크 주소를 조직할 수 있다.
			    - 낮은 레벨의 네트워크를 모아서 하나의 네트워크처럼 활용할 수 있다.
	  
	    - DHCP 동적 호스트 구성 프로토콜
		    - DHCP는 호스트가 자신의 IP 주소를 네트워크에 있는 서버로부터 자동으로 얻을 수 있게 한다. 
		    - 접속하는 순간 DHCP 서버가 IP 주소 부여
		    - DHCP는 호스트 IP 주소의 할당 뿐만 아니라 서브넷 마스크, 디폴트 게이트웨이 주소나 로컬 DNS 서버 주소 같은 추가 정보도 얻게 해준다.
		    - DHCP는 호스트가 빈번하게 접속하고 떠나는 영역에서 폭 넓게 사용된다. 
		    - 떠난 호스트의 주소를 회수하여 다른 호스트에게 다시 부여하는 방식으로 IP주소를 재사용할 수도 있다.
		    - 클라이언트 서버 프로토콜
		    - 단계
			    - DHCP DISCOVER: 새로 접속한 클라언트가 DHCP discover message 전송
				    - 출발지 주소는 0.0.0.0, 도착지 주소는 255.255.255.255 67번 포트로 전송
			    - DHCP OFFER: DHCP offer message를 클라이언트에게 제공
				    - DHCP 서버가 수신한 discover 메시지의 트랜잭션 ID, 클라이언트에 제공된 IP 주소, 네트워크 마스크, IP 주소 유효기간을 포함한다.
			    - DHCP REQUEST: DHCP 서버를 선택하여 DHCP 요청 메시지를 전송한다. 
			    - DHCP ACK: 전달받은 요청메시지에대해 DHCP 서버가 응답한다.
				    - 클라이언트가 DHCP ACK 메시지를 받으면 클라이언트는 DHCP 할당 IP 주소를 임대 기간 동안 사용할 수 있다.
	    
	    - NAT(Network Address Translation)
		    - 네트워크 주소를 효율적으로 사용할 수 있게 해주는 기술
		    - 하나의 주소로 로컬 네트워크 내의 모든 호스트들이 외부와 통신할 수 있다. 
		    - 내부 호스트는 외부 호스트와 구분될 필요가 없다.
		    - 외부에서 하나의 주소로 통신이 들어오면 내부에서 알아서 구별하여 사용할 수 있다.
		    - 내부에서 사설망 private IP로 구분한다. 내부에서만 쓰이는 비공식적인 IP 주소로 ISP에게 부여 받은 외부 통신 주소인 public IP 와 구분하여 사용할 수 있다. 
		    - 그러므로 내부에서 호스트가 직접 서버를 운영할 땐 포트포워딩 기술이 필요하다.
		     
	    - IPv6
		    - 부족한 주소 문제 때문에 등장하게 되었다.
		    - IPv4 에 비해 간결하고 간소하게 만들어졌다.
		    - 32bit에서 128bit 로 주소 크기 자체를 확장
		    - 40byte의 고정된 헤더 길이를 가진다. 고정된 길이를 가지므로 라우터가 IP 데이터그램 헤더를 더 빨리 처리할 수 있다. 
		    - 단편화/재결합은 호스트에서만 수행된다.
		    - 트랜스포트 계층 프로토콜과 데이터 링크 프로토콜이 체크섬을 이미 수행하고 있으므로 네트워크 계층에서는 생략하였다.
	    
	    - match plus action
		    - 라우팅 방식의 변화
		    - 기존의 IP 네트워크에서는 동일한 목적지의 패킷은 동일한 방식으로 forwarding 해야했었다. 
		    - SDN 네트워크에서는 각각의 패킷 스위치는 원격 컨트롤러에 의해 계산 및 분포된 매치 플러스 액션 테이블을 포함하고 있으며, 이런 원격 컨트롤러가 설정한 flow table 을 사용하여 목적지가 동일해도 서로 다른 방식으로 forwarding 할 수 있다.

- 네트워크 계층의 제어평면(control plane)
	- 제어평면은 데이터 그램이 출발지 호스트부터 목적지 호스트까지의 경로를 따라 어떻게 전달되야 하는지 제어한다. 그리고 네트워크 계층 구성 요소와 서비스를 어떻게 설정하고 관리할지도 제어한다.
	-   제어평면을 다루는 방법
	    -   전통적인 방법: 라우터별 제어
	        -   라우팅 알고리즘의 각 라우터에서 동작하면서 라우터의 포워딩 테이블의 내용을 결정한다.
	        -   각 라우터는 다른 라우터의 라우팅 구성요소와 통신하여 자신의 포워딩 테이블의 값을 계산한다.
	        -   라우터는 포워딩과 라우팅 기능을 모두 갖고 있다.
	        -   OSPF, BGP 프로토콜은 라우터별 제어 방식을 기반으로 동작한다.
	    -   현대적인 방법: 논리적 중앙 집중형 제어
	        -   SDN(Software-defined networking): 소프트웨어 정의 네트워킹
	            -   라우터와 물리적으로 분리된 중앙의 컨트롤러가 포워딩 테이블을 세팅하고 라우터는 포워딩 기능만을 수행한다.
	            -   중앙서버에서 모든 라우터들이 가지는 정보를 수집한 뒤에 그 정보를 기반으로 포워딩 테이블을 만들어주고 라우터에 전달한다.
	            -   더 많은 정보를 가지고 포워딩 테이블을 만들기 때문에 보다 효율적인 길을 선택할 수 있다는 장점이 있다.
	            -   중앙의 라우팅 컨트롤러는 라우터의 제어 에이전트(control agent, CA)와 상호작용하여 라우터의 플로우 테이블을 구성 및 관리한다.
	            -   라우터별 제어방식과는 다르게 라우터의 CA간 직접적으로 상호작용하지 않는다.
	            -   매치 플러스 액션 추상화를 통해 라우터는 기존에는 별도의 장치로 구현되었던 다양한 기능(부하분산, 방화벽, NAT)뿐만 아니라 전통적인 IP 포워딩을 수행할 수 있다.

- 라우팅 알고리즘
	- 목표
	    - 송신자부터 수신자까지 라우터의 네트워크를 통과하는 좋은 경로를 결정하는 것
         - 일반적으로 좋은 경로는 최소 비용 경로를 의미한다.
     - 종류
	     - 중앙 집중형 라우팅 알고리즘(centralized routing algorithm)
		     - 네트워크 전체에 대한 완전한 정보를 가지고 경로를 설정한다.
		     - 전체 상태 정보를 갖는 링크 상태(link-state,LS) 알고리즘이다.
		     - 각 라우터가 상태 정보 메시지를 통해 네트워크 전체 토폴로지(topology)를 구성하고 이를 바탕으로 최단 경로의 포워딩 테이블을 만드는 방식
		     - 상용 프로토콜: OSPF(Open Shortest Path First)
	     - 분산 라우팅 알고리즘(decentralized routing algorithm)
		     - 어떤 노드도 모든 링크의 비용에 대한 완전한 정보를 가지고 있지 않다.
		     - 최소 비용 경로의 계산이 라우터들에 의해 반복적이고 분산된 방식으로 수행된다.
		     - 각 노드가 네트워크 내 다른 모든 노드까지 거리(비용)의 추정값을 벡터 형태로 유지하는 거리 벡터(distance-vector, DV) 알고리즘이다.
			     - 각 라우터가 주기적으로 이웃 라우터와 라우팅 정보를 주고받음으로써 다른 노드에 이르는 거리 비용을 갱신하는 방식
		     - 각 라우터는 하나 이상의 직접 연결된 이웃으로부터 정보를 받고 계산을 수행하며, 계산된 결과를 다시 그 이웃들에게 배포하는 분산적인 방식을 사용하고 있으며, 이웃끼리 정보를 더 이상 교환하지 않을 때까지 프로세스가 지속된다는 점에서 반복적이다.
		     - 상용 프로토콜 : RIP(Routing Information Protocol)


   -  AS(autonomous system)
        -   AS란?
            -   한 관리 기관에서 관리하는 IP 네트워크의 집합, 동일한 network preifx(도메인)를 가진다.
            -   AS는 전 세계적으로 고유한 AS 번호로 식별될 수 있다.
            -   라우팅을 AS 내부 라우팅과 AS 외부 라우팅으로 구별할 수 있다.
            -   하나의 AS 내에서는 동일한 라우팅 알고리즘(AS 내부 라우팅 프로토콜(intra-AS routing protocol)) 사용해야한다.
        -   등장 배경
            -   경로계산의 복잡성을 감소시킨다.
                -   인터넷의 라우터 수가 증가함에 따라 라우팅 정보의 통신 계산 저장에 필요한 오버헤드가 걷잡을 수 없이 증가한다. 모든 라우터가 동일한 라우팅 알고리즘을 수행한다면 이들 라우터 각각에 모든 가능한 목적지로의 라우팅 정보를 저장하기 위해서 막대한 양의 메모리가 필요할 것이다.
            -   ISP는 자신의 라우터들로 구성된 네트워크를 원하는 대로 운용하거나 네트워크 내부 구성을 외부에 감추길 원했다. 조직은 자신의 내부 네트워크를 외부 네트워크에 연결하면서도 자신이 원하는 대로 네트워크를 운영하고 관리할 수 있어야 했다.
    -   인터넷 서비스 제공업자(ISP) 간의 라우팅
        -   border router(gateway router): 외부의 다른 AS와 링크를 갖는 라우터
        -   border 라우터가 통신을 할때는 동일한 프로토콜 BGP를 사용한다.
        -   BGP(Border Gateway Protocol) inter-domain routing, 특별히 Path vector protocol이라고 부른다.
        -   패킷의 목적지가 AS 외부에 존재할 때 패킷은 여러 AS를 통과하는 경로로 라우팅되어야한다. intra-AS 라우팅 알고리즘으로는 불충분하다. 하나의 라우터 내의 포워딩 테이블은 intra-AS 라우팅과 inter-AS 라우팅의 동작이 합쳐져서 구성된다.


- SDN(Software Defined Networking)
    -   SDN은 네트워크 기능을 분리하여 관리할 수 있게한다.
    -   SDN 구조의 특징
        -   플로우 기반 포워딩
            -   전통적인 포워딩은 IP 데이터그램의 목적지 주소를 기반으로 이루어진다.
            -   SDN으로 제어되는 스위치들에서의 패킷 전달은 트랜스포트 계층, 네트워크 계층, 링크 계층 헤더의 어떤 값을 기반으로 하든 이루어질 수 있다.
        -   데이터 평면과 제어 평면의 분리
            -   데이터 평면은 네트워크의 스위치들로 구성되어 있으며 상대적으로 단순하고 빠른 장치로서 자신들의 플로우 테이블 내용을 기반으로 매치 플러스 액션을 수행한다.
            -   제어 평면은 서버와 스위치들의 플로우 테이블을 결정, 관리하는 소프트웨어로 이루어진다.
        -   네트워크 제어 기능이 데이터 평면 스위치 외부에 존재
            -   제어평면은 SDN 컨트롤러와 네트워크 제어 애플리케이션들의 집합으로 이루어져 있다.
            -   SDN 컨트롤러는 정확한 상태 정보를 유지하고 이 정보를 네트워크 제어 애플리케이션들에 제공하며, 애플리케이션들이 하부 네트워크 장치들을 모니터 하고 프로그램하고 제어까지 할 수 있도록 수단을 제공한다.
        -   프로그램이 가능한 네트워크
            -   제어평면의 네트워크 제어 애플리케이션을 통해 네트워크를 프로그램할 수 있다.
            -   라우팅 네트워크 제어 애플리케이션은 SDN 컨트롤러가 갖고 있는 노드 상태 및 링크 상태 정보를 기반으로 출발지와 목적지 사이의 종단 간 경로를 결정한다.
            -   어떤 패킷을 스위치에서 막을지 결정하는 접속제어 기능도 수행할 수 있다.
            -   서버의 부하를 분산시키는 방식으로 패킷을 전달할 수도 있다.
-   Open Flow
    -   데이터 평면의 Open Flow 스위치와 제어평면의 Open Flow 스위치가 통신할 때 사용하는 프로토콜
    -   컨트롤러가 스위치의 상태를 조회하거나 설정할 수 있다.
-   인터넷 제어 메시지 프로토콜(Internet Control Message Protocol, ICMP)
    -   호스트와 라우터가 서로 간에 네트워크 계층 정보를 주고받기 위해 사용된다.
    -   주로 에러 리포팅 용도로 사용된다.
    -   예: 목적지를 찾을 수 없을 경우 라우터가 오류 발생을 알리기 위해 ICMP 메시지를 만들어서 호스트에게 보낸다.
    -   ICMP 메시지는 IP 데이터그램 위에서 동작하며 IP 페이로드로 전송된다.


		    
## 링크 계층과 근거리 네트워크

### 링크 계층
- 링크란?
	- 노드들을 직접 연결하는 통신 채널을 링크라고 한다. 
	- 노드는 호스트, 라우터, 스위치, 와이파이 access point를 의미한다.
- 목적
	- 물리적으로 연결되어 있는 2개의 노드 사이에서 데이터그램을 전달해주는 역할
- 프레임(frame)
	- 링크 계층에서 만들어지는 패킷을 지칭
- 제공하는 서비스
	- 서비스의 세부사항은 링크에 적용되는 특정 링크 계층 프토토콜에 따라 달라질 수 있다.
	- 프레임화
		- 거의 모든 링크 계층 프로토콜은 네트워크 계층의 데이터그램을 링크 상으로 전송하기 전에 링크 계층 프레임에 캡슐화한다.
	- 링크 접속
		- 매체 접속 제어(medium access control, MAC) 프로토콜은 링크상으로 프레임을 전송하는 규칙을 명시한다.
		- 하나의 브로드캐스트 링크를 여러 노드가 공유하는 경우 MAC 프로토콜은 여러 노드로부터의 프레임 전송을 조절한다.
	- 신뢰적 전달
		- 트랜스포트 계층의 신뢰적 전달 서비스와 마찬가지로 확인응답과 재전송을 통해 가능하다.
		- 오류 발생시 오류가 발생한 링크에서 오류를 정정한다.
		- 무선 링크처럼 오류율이 높은 링크에서 주로 사용된다. 낮은 비트 오류율을 가진  유선 링크에서는 불필요한 오버헤드가 될 수 있으므로 대다수 유선 링크 계층 프로토콜은 신뢰적 전달 서비스를 제공하지 않는다.
	- 오류 검출과 정정
		- 수신 노드의 링크 계층 하드웨어는 1과 0을 반대로 오인할 수 있다.
		- 송신노드에서 프레임에 오류 검출비트를 설정하게 하고 수신 노드에서 오류 검사를 수행한다.
		- 링크 계층에서의 오류 검출은 일반적으로 더 복잡하며 하드웨어로 구현된다.
- 구현 위치
	- 라우터의 라인 카드에 구현된다.
	- 호스트의 네트워크 인터페이스 컨트롤러로 알려진 네트워크 어댑터에 구현된다.
		- 네트워크 어댑터의 중심에는 링크 계층 컨트롤러가 있다.
		- 링크 계층 컨트롤러는 링크 계층 서비스의 대다수가 구현되어있는 단일의 특수 용도 칩으로 하드웨어로 구현된다고 볼 수 있다.
- 종류
	- 점대점 링크(point-to-point)
		- 송신자와 수신자가 1대1로 연결
		- PPP, HDLC
	- 브로드캐스트 링크
		- 동일한 하나의 공유된 브로드 캐스트 채널에 다수의 송신 노드 및 수신노드가 연결되어있다.
		- 임의의 한 노드가 프레임을 전송하면 채널이 그 프레임을 브로드캐스트해서 다른 모든 노드가 그 프레임의 복사본을 수신할 수 있다.
		- 대표적인 예: 이더넷과 무선랜
		- 모든 노드가 프레임을 전송할 수 있으므로 2개 이상의 노드가 동시에 프레임을 전송할 수 있다. 그러면 동시에 전송된 프레임들이 각 수신자에서 충돌이 발생하고 관련된 모든 프레임은 손실된다. 그러므로 다수의 노드가 활성화되어 있을 때 노드들 간의 전송을 조정하기 위한 다중 접속 프로토콜(multiple access protocol)을 사용된다.
			- 채널 분할 프로토콜
				- 전체 채널을 분할해서 충돌 없이 사용할 수 있게 한다. 
				- TDMA
					- 전체 채널을 시간 단위로 분할해서 충돌없이 사용
					- 특정 시간 슬롯을 노드에게 할당
				- FDMA
					- 전체 채널을 주파수 채널 단위로 분할해서 충돌없이 사용
					- 특정 주파수를 노드에게 할당
				- CDMA(code division multiple access)
					- 각 노드에게 특정한 코드를 할당한 후 데이터를 보낼때 특정한 코드를 가진 노드만 해석할 수 있는 암호화된 데이터를 보낸다. 
					- 각 노드들이 동시에 전송할 수 있고 다른 노드들에 의해 전송이 간섭되더라도 각 수신자들이 송신자의 인코딩된 데이터 비트를 정확하게 수신할 수 있다.
					- 인코딩과 디코딩 방식으로 데이터를 구분한다.
			- 순번 프로토콜
				- 순서를 정해서 보내기 때문에 충돌이 발생하지 않는다.
			- 랜덤 접속 프로토콜
				- 노드는 항상 채널의 최대 전송률로 전송한다.
				- 충돌이 생기면 충돌과 관련된 각 노드는 패킷이 충돌없이 전송될 때까지 랜덤 지연시간 동안 기다린 후 재전송한다.
				- 충돌이 생긴후 각 노드는 다른 노드와 다른 지연시간을 스스로 결정하여 충돌을 피할 수 있다.
				- ALOHA
				- CSMA
- 오류 검출과 정정
	- 기본적으로 중복성을 이용해서 오류를 검출하고 수정한다.
	- 송신 노드에서 데이터에 오류 검출 및 정정 비트들(EDC)을 첨부한다. 
	- 데이터 전송의 정확성과 데이터 전송의 오버헤드 사이의 트레이드오프를 고려해야한다.
	- 오류 검출 기술 
		- 패리티 검사
			- 가장 단순한 형태
			- 보내는 쪽과 받는 쪽에서 약속을 해서 패리티비트 추가 후 1의 총 개수가 짝수인지 홀수 인지 검사한다.
			- 오버헤드는 낮지만 에러가 2비트 이상이 동시에 발생할 경우 오류 검출 불가능
		- 체크섬
		- 순환 중복 검사(CRC)

### 근거리 네트워크
- 스위치 네트워크에서는 링크 계층 프레임을 전송하기 위해 링크 계층 주소를 사용한다.
- MAC address
	- 네트워크 인터페이스 카드 내에 ROM(read only memory) 에 정해져있음.
	- 유일한 주소
	- 프레임을 수신한 네트워크 어댑터는 프레임안의 목적지 MAC 주소와 자신의 MAC 주소를 비교하여 일치하면 데이터그램을 추출하여 프로토콜 스택의 위쪽으로 전달한다. 일치하지 않으면 폐기한다. 
- ARP(address resolution Protocol)
	- 네트워크 계층과 링크 계층의 경계에 존재하는 프로토콜
	- ARP를 통해 IP주소에 해당하는 MAC주소를 조회할 수 있다. 
	- IP 주소와 MAC주소의 변환을 지원하는 ARP 테이블은 각 호스트와 라우터의 메모리에 존재한다.
	- ARP 테이블에 목적지의 MAC주소가 없으면 우선 ARP 질의 패킷을 MAC 브로드캐스트 주소로 전송하면 일치하는 노드는 ARP 응답 패킷을 전송한다.

- 이더넷(ethernet)
	- 초기에는 버스 형태의 topology 였으나 최근에는 하나의 스위치 허브에 노드들이 연결되는 star 형식의 topoplogy가 사용되고 있다.
	- 링크 계층 스위치
		- 링크 계층 프레임을 수신해서 출력 링크로 전달한다.
		- 스위치는 충돌 없는 장치이며 저장 후 전달 방식의 패킷 스위치이다. 2계층까지만 동작한다.
		- 스위치의 역할은 각 호스트들이 보내는 패킷을 버퍼링한 후 목적지 주소를 살피고 목적지 주소에 맞는 포트로 패킷을 전달한다.
		- 스위치 테이블에는 MAC 주소, MAC 주소로 가게하는 스위치 인터페이스, 해당 엔트리가 테이블에 만들어진 시점에 대한 정보가 들어있다. 스위치 테이블을 이용해 필터링과 포워딩 기능을 수행한다.
		- 스위치는 자신의 테이블을 자가학습을 통해 자동으로 동적으로 구축한다.


## 무선 및 이동 네트워크

### 개요
- wireless
	- 무선 링크를 통해 통신하는 모든 기술이 wireless 통신 기술이다.
	- 와이파이는 이동하면 끊어지고 인위적으로 새로운 AP 에 접속을 해야한다.
- mobile
	- 사용자가 이동하더라도 AP 변경을 통해 끊김 없이 재접속하여 사용할 수 있다. 
	- 무선 전화망은 이동해도 끊김없이 접속이 가능하다.

### wireless 네트워크
- 구성요소
	- 무선 호스트: 무선 통신 기술이 적용되어있는 디바이스
		- 노트북, 스마트폰, 태블릿
	- 무선 링크
		- 호스트는 무선 통신 링크를 통해 기지국이나 다른 무선 호스트에 연결된다.
	- 기지국(base station)
		- 기지국은 기지국에 결합된 무선 호스트와의 데이터 송수신에 대한 책임을 진다.
		- 이동 호스트가 다른 기지국 영역으로 이동하는 경우 접속하는 기지국이 자동으로 변경되어야 하며 이 과정을 핸드오프(handoff) 또는 핸드오버(handover)라고 한다. 
- 특징
	- 무선 전자기파는 물체를 통과함에 따라 신호세기가 급격하게 감소한다.(path loss)
	- 동일 주파수 대역으로 전송되는 무선 신호들끼리 서로 간섭될 수 있다.
	- 다중경로 전파
		- 송신자가 보낸 전파가 물체에 부딪혀서 서로다른 시간에 도착하기 때문에 간섭이 일어날 수 있다.
	- SNR(signal-to-noise ratio)
		- 측정된 수신 신호의 세기와 잡음의 상대적인 비율
		- 단위는 dB
		- SNR 값이 커질수록 수신 측에서는 잡음이 있더라도 원하는 신호를 추출하기 쉬워진다.

- 와이파이
	- IEEE 802.11 무선랜
	- 구조
		- BSS(basic service set)
			- 하나 이상의 무선 단말기 + 하나의 기지국(Access Point)
			- 무선 기지국은 6바이트의 MAC 주소를 가진다. MAC주소는 스테이션의 어댑터 펌웨어에 내장되어있다.
			- AP에게는 하나 또는 2 단어로 된 SSID를 할당하고 채널 숫자를 할당한다. 
			- 서로 다른 2개의 채널은 4개채널 이상의 간격으로 분리되어 있어야 겹치지 않으므로 802.11은 채널 1, 6, 11 을 사용해야 겹치지 않는다.
			- 와이파이 정글(무선 스테이션이 둘 이상의 AP로부터 충분히 강한 신호를 받을 수 있는 모든 지역)에서 무선 스테이션이 단 하나의 AP와 결합하기 위해서 AP가 주기적으로 비컨 프레임(beacon frame)을 전송할 것을 요구하고 있다. 비컨 프레임에는 AP의 SSID 와 MAC 주소가 포함된다.
			- 비컨 프레임으로 부터 사용가능한 AP 정보를 얻은 무선 스테이션은 결합을 맺을 AP를 하나 선택한다.
	- MAC 프로토콜
		- 여러 무선 스테이션이 동시에 동일한 채널로 데이터 프렝임을 전송할 수도 있으므로 전송을 조정하기 위한 다중 접속 프로토콜이 필요하다.
		- 채널분할, 순번, 랜덤 접속 방법이 있지만 802.11 설계자들은 이더넷에서의 랜덤 접속 프로토콜의 성공에 영감을 받아서 랜덤 접속 프로토콜인 CSMA/CA 을 사용하기로 결정했다.
		- CSMA/CA
			- CSMA/CD 처럼 스테이션이 전송하기전에 채널 상태를 감지하고 사용중이면 전송하지 않는다.
			- 이더넷과 차이점
				- 충돌 검출을 사용하지 않고 충돌회피 기술을 사용한다.
					- 충돌 검출을 하려면 송신과 수신이 동시에 가능해야 한다. 그러나 일반적으로 802.11 어댑터에서 수신 신호의 세기는 송신 신호의 세기에 비해 아주 약하므로 송수신을 모두 고려하여 충돌을 검출할 수 있는 하드웨어에 많은 비용이 든다.
					- 숨은 터미널 문제와 페이딩 때문에 충돌을 검출하지 못할 가능성이 존재한다.
					- 숨은 터미널의 해결방안
						- 스테이션들이 짧은 RTS 제어프레임과 짧은 CTS 제어프레임을 주고 받게 함으로써 채널 접속을 예약할 수 있게한다.
						- AP가 RTS를 수신하면 영역내의 전체 스테이션에 CTS 프레임을 전송함으로써 송신자에게는 전송할 수 있다는 허가를 명확히 알려주고, 다른 스테이션들에게는 예약된 시간 동안 전송하지 못하게 한다. 
				- 무선 채널의 비트 오류율이 상대적으로 크므로 링크계층 ARQ(ACK/재전송) 방식을 사용한다.
					- 목적지 스테이션은 CRC 검사를 통과한 프레임을 수신하면 SIFS라는 짧은 시간을 기다린 후에 ACK 프레임을 송신 스테이션에게 보낸다.
					- 주어진 시간내로 ACK 를 수신하지 못하면 송신 스테이션은 오류를 발생했다고 가정하고 다시 CSMA/CA 프로토콜을 사용해서 채널 접속을 한후 프레임을 재전송한다.
					- 일정횟수만큼의 재전송 후에도 ACK를 수신하지 못하면 송신스테이션은 포기하고 프레임을 폐기한다.

- 블루투스
	- WPAN, piconet(하나의 마스터 기기와 최대 7개의 슬레이브 기기로 이루어진 무선 네트워크)
	- 저전력, 저비용, 단거리
	- ISM 밴드로서 허가가 필요없는 2.4 GHz 대역에서 동작하고 소음과 간섭현상을 염두에 두고 설계됨
	- 블루투스 네트워크는 AP 등의 인프라스트럭처가 없는 애드훅 네트워크
		- 중앙 집중형 제어 노드는 네트워크 진입이 허용된 클라이언트에게 폴링 방식을 사용하여 전송 권한을 부여한다.
		- 중앙 집중형 제어 노드는 연결이 가능한 블루투스 노드를 검색하기 위해서 브로드캐스트하고 대기하던 클라이언트 장치는 자신의 ID를 포함하는 응답 메시지를 중앙 집중형 제어 노드로 전송한다.
		- 중앙 노드는 검색된 클라이언트 장치를 대상으로 블루투스 페이징을 시작한다. 페이징 과정을 통해 사용할 주파수 도약 정보와 클록 정보를 클라이언트에게 알린다.
		- 클라이언트 장치는 메시지에 ACK로 응답하고 중앙 노드로부터 주파수 도약 정보와 클록 정보 활성화된 멤버의 주소를 전송받는다.
		- 중앙 노드는 클라이언트를 폴링(Polling)하여 클라이언트가 네트워크에 연결되어있음을 확인하고 주파수 도약 패턴을 사용한 통신을 시작한다.
		- 폴링은 일정한 간격으로 클라이언트에게 요청을 보내고, 클라이언트가 응답하면 연결이 유지되고 있음을 확인하는 방법이다.
