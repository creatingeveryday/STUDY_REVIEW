# 컴퓨터 네트워킹 하향식 접근

## 1. 인터넷과 프로토콜

-   인터넷이란?
    -   정의: 네트워크의 연결
    -   구성요소
        -   하드웨어
            -   host(end system): 클라이언트와 서버로 구분할 수 있다.
            -   links  
                -   구리선, 동축 케이블, 광케이블, 라디오 스펙트럼, 위성 전파
                -   전송률(링크 대역폭) (transmission rate, link capacity, bandwith) - 단위 bit per second (bps)
                -   end system 과 router 간 링크를 통해 데이터를 교환한다.
            -   router, switch
                -   라우터와 스위치는 도착하는 패킷을 받아서 출력 통신 링크로 패킷을 전달한다.
        -   소프트웨어
            -   운영체제
            -   응용 프로그램
            -   프로토콜
                -   프로토콜은 둘 이상의 통신 개체 간에 교환되는 메시지 포맷과 순서뿐만 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동을 정의한다.
                -   TCP/IP 는 인터넷에서 가장 중요한 프로토콜이다.
-   네트워크 엣지
    -   접속 네트워크(access network): end system 간에 연결되는 경로상의 첫번째 라우터에 연결하는 네트워크
        -   DSL, 케이블, FTTH, 5G-FW
        -   이더넷(Ethernet) 스위치
        -   무선 LAN(Wi-Fi) - AP(access point)
        -   3G / 4G LTE / 5G
    -   비트의 전달 방식
        -   출발지 host(end system)이 비트를 전송한다.
        -   첫번째 라우터가 비트를 수신한 후에 경로 상의 다음 라우터로 전송하고 두번째 라우터가 비트를 수신한다.
        -   비트는 물리 매체(꼬임쌍선, 동축케이블, 광케이블, 지상파, 위성파) 상에서 전자파나 광 펄스를 전파하여 전송한다.
-   네트워크 코어
    -   네트워크 코어는 인터넷의 end system 을 연결하는 패킷 스위치(라우터)와 링크의 그물망 형태를 가지고 있다.
    -   패킷 교환
        -   host(end system) 간의 통신시 긴 메시지를 패킷(paket)이라는 작은 데이터 단위로 분할하여 전송된다.
        -   각 패킷은 패킷 스위치(라우터)와 링크계층 스위치를 거치게된다.
        -   라우터는 저장 후 전달 전송 방식을 이용한다. 패킷을 전달시 전체 패킷을 수신할 때까지 버퍼에 패킷의 비트를 저장한 후 전체 패킷의 비트를 수신하면 완성된 패킷을 다음 라우터로 전송한다.
    -   큐잉 지연과 패킷 손실
        -   라우터는 링크에 대해 출력 버퍼를 가지고 있으며 그 링크로 송신하려는 패킷을 저장하고 있다.
        -   도착하는 패킷이 전송되어야 하는 링크가 다른 패킷을 전송하고 있다면 도착하는 패킷이 출력 버퍼에서 대기해야하는 큐잉 지연(Queuing delay) 현상이 발생한다.
        -   버퍼 공간의 크기가 유한하므로 버퍼 공간이 꽉 차있다면 패킷 손실이 발생할 수도 있다.
    -   포워딩 테이블과 라우팅 프로토콜
        -   라우터는 패킷을 어느 링크로 전달할 지 어떻게 결정하는가?
            -   모든 host(end system)은 고유의 IP 주소를 가진다.
            -   패킷을 전송할 때 패킷의 헤더에 목적지의 IP 주소를 포함하여 전송한다.
            -   각 라우터는 목적지 주소를 라우터의 출력 링크로 매핑하는 포워딩 테이블을 갖고 있다.
            -   라우터는 도착한 패킷을 조사하여 IP 주소를 확인 후 IP 주소를 이용하여 포워딩 테이블을 검색한다.
            -   확인된 출력 링크로 도착한 패킷을 전송한다.
        -   포워딩 테이블은 어떻게 설정되는가?
            -   인터넷은 자동으로 포워딩 테이블을 설정하는 데 이용되는 라우팅 프로토콜을 가지고 있다.
    -   데이터 전달 방식
        -   회선 교환 방식(circuit switching)
        -   패킷 교환 방식(packet switching)

- 프로토콜 계층
    -   프로토콜은 계층 구조를 이루고 있다.
    -   각 계층은 인접 계층과 연계하여 특정한 서비스를 구현한다.
    -   각 계층에서 패킷은 헤더 필드와 페이로드 필드라는 두 가지 형태의 필드를 가지고 있으며 페이로드는 일반적으로 상위 계층의 패킷을 의미한다.
    -   상위 계층에서 하위 계층으로 메시지 이동시 캡슐화 과정을 거친다.
 
 - 애플리케이션 계층

	-   네트워크 애플리케이션, 애플리케이션 계층 프로토콜(HTTP, SMTP, FTP 등)이 존재하는 계층
	-   애플리케이션 계층 프로토콜을 통해 다른 end system의 애플리케이션과 정보 패킷(message)을 교환할 수 있다.

- 트랜스포트 계층

	-   클라이언트와 서버 간에 애플리케이션 계층 메시지를 전송하는 서비스를 제공한다.
	-   트랜스포트 계층 패킷을 segment라고 부른다.
	-   TCP
	    -   연결 지향형 서비스 제공
	    -   연결 지향형 서비스는 애플리케이션 계층 메시지 전달을 보장하고 흐름 제어 기능을 포함한다.
	    -   긴 메시지를 짧은 메시지로 나누고 혼잡 제어 기능을 제공하여 네트워크가 혼잡할 때 출발지의 전송률을 조정한다.
	-   UDP
	    -   비연결형 서비스 제공
	    -   비연결형 서비스는 전달보장, 흐름제어, 혼잡 제어 기능 없이 단순히 애플리케이션 계층의 메시지를 전송만 하는 간단한 서비스다.

- 네트워크 계층(IP 계층)

	-   네트워크 계층 패킷을 datagram이라고 부른다.
	-   네트워크 계층은 호스트 간 datagram을 라우팅 하는 책임 갖고 있다.
	    -   출발지 end system(호스트)에서 트랜스포트 계층 프로토콜은 트랜스 포트 계층 세그먼트와 목적지 주소를 네트워크 계층으로 전달한다.
	    -   네트워크 계층은 이렇게 전달받은 목적지 주소를 이용하여 목적지 end system 의 트랜스포트 계층으로 세그먼트를 운반한다.
	-   네트워크 계층 프로토콜은 IP 프로토콜과 라우팅 프로토콜을 포함한다.
	-   IP
	    -   네트워크 계층을 가진 모든 인터넷 요소는 IP 프로토콜을 수행해야한다.
	-   라우팅 프로토콜
	    -   출발지와 목적지 사이에서 데이터그램이 이동하는 경로를 결정한다.

- 링크 계층

	-   경로 상의 한 노드에서 다른 노드로 패킷을 이동하기 위해 네트워크 계층은 링크 계층 서비스에 의존하고 있다.
	-   각 노드에서 네트워크 계층은 데이터그램을 아래 링크 계층으로 보내고 링크 계층은 전달 받은 데이터그램을 경로상의 다음 노드에 전달한다. 다음 노드에서 링크 계층은 데이터그램을 상위 네트워크 계층으로 보낸다.
	-   링크 계층 패킷은 프레임(frame)이라고 부른다.

- 물리 계층
	-   링크 계층의 패킷(frame) 내부의 각 비트를 이동하는 책임을 수행한다.